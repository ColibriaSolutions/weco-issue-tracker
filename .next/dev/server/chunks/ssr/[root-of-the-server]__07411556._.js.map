{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///G:/SourceCode/WECORelated/weco-issue-tracker/lib/validations.ts"],"sourcesContent":["import { z } from 'zod'\r\n\r\nexport const createIssueSchema = z.object({\r\n    projectId: z.string().uuid(),\r\n    title: z.string().min(3, 'Title must be at least 3 characters').max(100, 'Title must be less than 100 characters'),\r\n    description: z.string().min(10, 'Description must be at least 10 characters'),\r\n    priority: z.enum(['low', 'medium', 'high', 'critical']),\r\n    screenshotUrl: z.string().url().nullable().optional(),\r\n})\r\n\r\nexport const updateStatusSchema = z.object({\r\n    issueId: z.string().uuid(),\r\n    status: z.enum(['open', 'in_progress', 'closed']),\r\n})\r\n\r\nexport type CreateIssueInput = z.infer<typeof createIssueSchema>\r\nexport type UpdateStatusInput = z.infer<typeof updateStatusSchema>\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,oBAAoB,yNAAC,CAAC,MAAM,CAAC;IACtC,WAAW,yNAAC,CAAC,MAAM,GAAG,IAAI;IAC1B,OAAO,yNAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,uCAAuC,GAAG,CAAC,KAAK;IACzE,aAAa,yNAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;IAChC,UAAU,yNAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAU;QAAQ;KAAW;IACtD,eAAe,yNAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,QAAQ;AACvD;AAEO,MAAM,qBAAqB,yNAAC,CAAC,MAAM,CAAC;IACvC,SAAS,yNAAC,CAAC,MAAM,GAAG,IAAI;IACxB,QAAQ,yNAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;QAAe;KAAS;AACpD"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///G:/SourceCode/WECORelated/weco-issue-tracker/app/actions/issue-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createServerClient } from '@/lib/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { put } from '@vercel/blob'\r\nimport { createIssueSchema, updateStatusSchema } from '@/lib/validations'\r\n\r\nexport async function uploadScreenshot(formData: FormData) {\r\n  try {\r\n    const file = formData.get('file') as File\r\n\r\n    if (!file) {\r\n      return { error: 'No file provided' }\r\n    }\r\n\r\n    const blob = await put(file.name, file, {\r\n      access: 'public',\r\n      token: process.env.BLOB_READ_WRITE_TOKEN,\r\n    })\r\n\r\n    return { url: blob.url }\r\n  } catch (error) {\r\n    console.error('[v0] Error uploading screenshot:', error)\r\n    return { error: 'Failed to upload screenshot' }\r\n  }\r\n}\r\n\r\nexport async function createIssue(input: {\r\n  projectId: string\r\n  title: string\r\n  description: string\r\n  priority: string\r\n  screenshotUrl: string | null\r\n}) {\r\n  try {\r\n    const validatedFields = createIssueSchema.safeParse(input)\r\n\r\n    if (!validatedFields.success) {\r\n      return {\r\n        error: validatedFields.error.flatten().fieldErrors,\r\n      }\r\n    }\r\n\r\n    const { projectId, title, description, priority, screenshotUrl } = validatedFields.data\r\n\r\n    const supabase = await createServerClient()\r\n\r\n    const { data, error } = await supabase\r\n      .from('issues')\r\n      .insert([\r\n        {\r\n          project_id: projectId,\r\n          title,\r\n          description,\r\n          status: 'open',\r\n          priority,\r\n          screenshot_url: screenshotUrl,\r\n        },\r\n      ])\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('[v0] Error creating issue:', error)\r\n      return { error: error.message }\r\n    }\r\n\r\n    revalidatePath(`/projects/${projectId}`)\r\n    return { data }\r\n  } catch (error) {\r\n    console.error('[v0] Error creating issue:', error)\r\n    return { error: 'Failed to create issue' }\r\n  }\r\n}\r\n\r\nexport async function updateIssueStatus(issueId: string, status: string) {\r\n  try {\r\n    const validation = updateStatusSchema.safeParse({ issueId, status })\r\n\r\n    if (!validation.success) {\r\n      return { error: 'Invalid status or issue ID' }\r\n    }\r\n\r\n    const supabase = await createServerClient()\r\n\r\n    const { data, error } = await supabase\r\n      .from('issues')\r\n      .update({ status: validation.data.status })\r\n      .eq('id', issueId)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('[v0] Error updating issue:', error)\r\n      return { error: error.message }\r\n    }\r\n\r\n    revalidatePath('/projects')\r\n    return { data }\r\n  } catch (error) {\r\n    console.error('[v0] Error updating issue:', error)\r\n    return { error: 'Failed to update issue' }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;AACA;;;;;;;AAEO,eAAe,iBAAiB,QAAkB;IACvD,IAAI;QACF,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,MAAM;YACT,OAAO;gBAAE,OAAO;YAAmB;QACrC;QAEA,MAAM,OAAO,MAAM,IAAA,qOAAG,EAAC,KAAK,IAAI,EAAE,MAAM;YACtC,QAAQ;YACR,OAAO,QAAQ,GAAG,CAAC,qBAAqB;QAC1C;QAEA,OAAO;YAAE,KAAK,KAAK,GAAG;QAAC;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;YAAE,OAAO;QAA8B;IAChD;AACF;AAEO,eAAe,YAAY,KAMjC;IACC,IAAI;QACF,MAAM,kBAAkB,uIAAiB,CAAC,SAAS,CAAC;QAEpD,IAAI,CAAC,gBAAgB,OAAO,EAAE;YAC5B,OAAO;gBACL,OAAO,gBAAgB,KAAK,CAAC,OAAO,GAAG,WAAW;YACpD;QACF;QAEA,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,aAAa,EAAE,GAAG,gBAAgB,IAAI;QAEvF,MAAM,WAAW,MAAM,IAAA,+IAAkB;QAEzC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,UACL,MAAM,CAAC;YACN;gBACE,YAAY;gBACZ;gBACA;gBACA,QAAQ;gBACR;gBACA,gBAAgB;YAClB;SACD,EACA,MAAM,GACN,MAAM;QAET,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAChC;QAEA,IAAA,8QAAc,EAAC,CAAC,UAAU,EAAE,WAAW;QACvC,OAAO;YAAE;QAAK;IAChB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;YAAE,OAAO;QAAyB;IAC3C;AACF;AAEO,eAAe,kBAAkB,OAAe,EAAE,MAAc;IACrE,IAAI;QACF,MAAM,aAAa,wIAAkB,CAAC,SAAS,CAAC;YAAE;YAAS;QAAO;QAElE,IAAI,CAAC,WAAW,OAAO,EAAE;YACvB,OAAO;gBAAE,OAAO;YAA6B;QAC/C;QAEA,MAAM,WAAW,MAAM,IAAA,+IAAkB;QAEzC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,UACL,MAAM,CAAC;YAAE,QAAQ,WAAW,IAAI,CAAC,MAAM;QAAC,GACxC,EAAE,CAAC,MAAM,SACT,MAAM,GACN,MAAM;QAET,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAChC;QAEA,IAAA,8QAAc,EAAC;QACf,OAAO;YAAE;QAAK;IAChB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;YAAE,OAAO;QAAyB;IAC3C;AACF;;;IAhGsB;IAoBA;IAgDA;;AApEA,8WAAA;AAoBA,8WAAA;AAgDA,8WAAA"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///G:/SourceCode/WECORelated/weco-issue-tracker/app/actions/comment-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createServerClient } from '@/lib/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { z } from 'zod'\r\n\r\nconst createCommentSchema = z.object({\r\n    issueId: z.string().uuid(),\r\n    content: z.string().min(1, 'Comment cannot be empty'),\r\n})\r\n\r\nexport async function addComment(formData: FormData) {\r\n    const supabase = await createServerClient()\r\n\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n        return { error: 'You must be logged in to comment' }\r\n    }\r\n\r\n    const rawData = {\r\n        issueId: formData.get('issueId'),\r\n        content: formData.get('content'),\r\n    }\r\n\r\n    const validated = createCommentSchema.safeParse(rawData)\r\n\r\n    if (!validated.success) {\r\n        return { error: validated.error.flatten().fieldErrors }\r\n    }\r\n\r\n    const { issueId, content } = validated.data\r\n\r\n    const { error } = await supabase\r\n        .from('comments')\r\n        .insert({\r\n            issue_id: issueId,\r\n            user_id: user.id,\r\n            content: content,\r\n        })\r\n\r\n    if (error) {\r\n        return { error: error.message }\r\n    }\r\n\r\n    revalidatePath(`/projects`) // Revalidate broadly to ensure updates show\r\n    return { success: true }\r\n}\r\n\r\nexport async function deleteComment(commentId: string) {\r\n    const supabase = await createServerClient()\r\n\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n        return { error: 'You must be logged in to delete comments' }\r\n    }\r\n\r\n    // RLS policies will handle the permission check (users can only delete their own)\r\n    // But we can also check role here if we want admins/support to delete.\r\n    // For now, relying on RLS + simple check.\r\n\r\n    const { error } = await supabase\r\n        .from('comments')\r\n        .delete()\r\n        .eq('id', commentId)\r\n\r\n    if (error) {\r\n        return { error: error.message }\r\n    }\r\n\r\n    revalidatePath(`/projects`)\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;;;;AAEA,MAAM,sBAAsB,yNAAC,CAAC,MAAM,CAAC;IACjC,SAAS,yNAAC,CAAC,MAAM,GAAG,IAAI;IACxB,SAAS,yNAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC/B;AAEO,eAAe,WAAW,QAAkB;IAC/C,MAAM,WAAW,MAAM,IAAA,+IAAkB;IAEzC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACxE,IAAI,aAAa,CAAC,MAAM;QACpB,OAAO;YAAE,OAAO;QAAmC;IACvD;IAEA,MAAM,UAAU;QACZ,SAAS,SAAS,GAAG,CAAC;QACtB,SAAS,SAAS,GAAG,CAAC;IAC1B;IAEA,MAAM,YAAY,oBAAoB,SAAS,CAAC;IAEhD,IAAI,CAAC,UAAU,OAAO,EAAE;QACpB,OAAO;YAAE,OAAO,UAAU,KAAK,CAAC,OAAO,GAAG,WAAW;QAAC;IAC1D;IAEA,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,UAAU,IAAI;IAE3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnB,IAAI,CAAC,YACL,MAAM,CAAC;QACJ,UAAU;QACV,SAAS,KAAK,EAAE;QAChB,SAAS;IACb;IAEJ,IAAI,OAAO;QACP,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;IAEA,IAAA,8QAAc,EAAC,CAAC,SAAS,CAAC,GAAE,4CAA4C;IACxE,OAAO;QAAE,SAAS;IAAK;AAC3B;AAEO,eAAe,cAAc,SAAiB;IACjD,MAAM,WAAW,MAAM,IAAA,+IAAkB;IAEzC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACxE,IAAI,aAAa,CAAC,MAAM;QACpB,OAAO;YAAE,OAAO;QAA2C;IAC/D;IAEA,kFAAkF;IAClF,uEAAuE;IACvE,0CAA0C;IAE1C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnB,IAAI,CAAC,YACL,MAAM,GACN,EAAE,CAAC,MAAM;IAEd,IAAI,OAAO;QACP,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;IAEA,IAAA,8QAAc,EAAC,CAAC,SAAS,CAAC;IAC1B,OAAO;QAAE,SAAS;IAAK;AAC3B;;;IA5DsB;IAqCA;;AArCA,8WAAA;AAqCA,8WAAA"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///G:/SourceCode/WECORelated/weco-issue-tracker/.next-internal/server/app/projects/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logout as '0091f46b0464e715be70c03aa0ef60514314032ae7'} from 'ACTIONS_MODULE0'\nexport {login as '40953ea532d9a9374e9cd0030d3ad0216ae7597243'} from 'ACTIONS_MODULE0'\nexport {signup as '40b8bfef349cbd5d9017a4f7e0f927d031e58600a2'} from 'ACTIONS_MODULE0'\nexport {createIssue as '4073747e662573e9a92fa3c69a3b3529efb3ec7485'} from 'ACTIONS_MODULE1'\nexport {uploadScreenshot as '40f65405c99442a0de86b685bf6f697c566fb9da6e'} from 'ACTIONS_MODULE1'\nexport {updateIssueStatus as '6051687192532dd23843dce84f4d777e599a2033aa'} from 'ACTIONS_MODULE1'\nexport {deleteComment as '40a5c4880732b952262f6fb2d85e8987f0adda355a'} from 'ACTIONS_MODULE2'\nexport {addComment as '405757b755020b7f6e14df84fffa58d84bc812ee67'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AAGA;AAGA"}}]
}